---
name: "Ralph Loop"
description: "Итеративные dev-циклы с авто-повтором — автономное решение проблем до достижения цели"
---

# Ralph Loop Skill

Итеративный execution loop для автономного решения задач. Агент работает в цикле пока задача не решена или не достигнут предел итераций.

## Концепция

Ralph Loop = Think → Act → Observe → Reflect → Repeat

```
LOOP START
├── 1. PLAN: Сформулируй следующий шаг
├── 2. EXECUTE: Выполни действие
├── 3. OBSERVE: Что получилось? Работает?
├── 4. REFLECT: Нужны ли изменения?
├── 5. DECIDE: Continue / Adjust / Stop
└── LOOP (до Done или MaxIterations)
```

## Применение

### `/ralph:implement`
Автономная реализация фичи:

```
Задача: [описание]
Acceptance Criteria: [список критериев]
Max iterations: [5-10]

Цикл:
1. Проанализируй требования
2. Напиши код
3. Запусти тесты
4. Если тесты падают — исправь
5. Повторяй до: все тесты ✅ + AC выполнены
```

### `/ralph:debug-loop`
Автономная отладка:

```
Проблема: [описание ошибки]
Max iterations: [5]

Цикл:
1. Изучи stacktrace / error message
2. Сформулируй гипотезу
3. Проверь гипотезу (читай код, добавь логи)
4. Если подтверждена — исправь
5. Проверь что исправление работает
6. Если не работает — следующая гипотеза
```

### `/ralph:refactor-loop`
Итеративный рефакторинг:

```
Цель: [что улучшить]
Метрика: [как измерить улучшение]

Цикл:
1. Запусти код-simplifier анализ
2. Найди top-1 проблему
3. Исправь
4. Запусти тесты (не сломали?)
5. Измерь метрику
6. Повторяй до достижения цели
```

### `/ralph:research-loop`
Итеративное исследование:

```
Вопрос: [что исследуем]
Threshold: [когда считаем исследование достаточным]

Цикл:
1. Поиск по теме
2. Прочитай и извлеки ключевые инсайты
3. Сформулируй уточняющие вопросы
4. Найди ответы
5. Повторяй до полного понимания
6. Синтезируй итоговый отчёт
```

## Параметры цикла

| Параметр | Default | Описание |
|----------|---------|----------|
| max_iterations | 5 | Максимум циклов |
| stop_on_success | true | Остановить при достижении цели |
| stop_on_failure | false | Остановить при критической ошибке |
| verbose | false | Показывать ли каждую итерацию |

## Stopping Conditions

**SUCCESS** — цикл завершается успешно когда:
- Все тесты проходят
- Acceptance Criteria выполнены
- Метрика достигла порога

**FAILURE** — цикл прерывается когда:
- Достигнут max_iterations
- Обнаружена критическая ошибка (security, data loss)
- Задача требует clarification от пользователя

**PAUSE** — цикл ставится на паузу когда:
- Нужно решение пользователя (ambiguous requirements)
- Требуются credentials / API keys
- Destructive action (delete, reset)

## Пример сессии

```
/ralph:implement

Задача: Добавить пагинацию в таблицу контактов CRM
AC:
- Отображается 25 записей на странице
- Кнопки Previous/Next работают
- URL обновляется (?page=2)
- Показывается "Showing 1-25 of 150"

Iteration 1:
  → Анализирую компонент ContactsTable
  → Добавляю usePagination hook
  → Добавляю PaginationControls компонент
  → Запускаю тесты: 3/5 passed ❌

Iteration 2:
  → URL update тест падает — забыл useSearchParams
  → Исправляю hook
  → Запускаю тесты: 5/5 passed ✅
  → Проверяю AC: все выполнены ✅

Done! 2 iterations.
```

## Интеграции

- Работает со всеми ln-400 execution skills
- Использует ln-402-task-reviewer для auto-review
- Использует ln-502-regression-checker для тестов
